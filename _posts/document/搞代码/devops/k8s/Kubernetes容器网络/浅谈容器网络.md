# 浅谈容器网络

在容器中,想要和主机以及其他宿主进行通信都需要经过docker0这个网桥,这一点大家都应该知道,其实容器内部的网络和Linux的网络通信基本都是类似的不外乎,网卡(Network Interface)、会换设备（Loopback Device)、路由表(Routing Table)和iptables规则.对于一个进程来说这些要素狗证了发起和响应网络请求的基本环境.

## 容器之间的网络通信

在同一个宿主机上容器与其他容器进行通信是需要通过docker0的网卡进行转发的,也就是说在容器内部实际上是看不到其他容器的,之所以和其他容器进行通信,是因为有docker0在其中座桥梁

![容器通信](https://static001.geekbang.org/resource/image/e0/66/e0d28e0371f93af619e91a86eda99a66.png)

## 容器与宿主机进行通信

容器与宿主机的交互实际上也需要经过docker0的网卡进行转发

![容器与宿主机](https://static001.geekbang.org/resource/image/9f/01/9fb381d1e49318bb6a67bda3f9db6901.png)

同理容器与其他的宿主机进行通信就需要宿主机与需要访问的主机保证网络连接可用

![与其他主机通信](https://static001.geekbang.org/resource/image/90/95/90bd630c0723ea8a1fb7ccd738ad1f95.png)

## 容器与其他宿主机上的容器进行通信

在同一个宿主机下容器之间的通信是通过docker0这样的统一网关进行交互的,如果需要访问其他集群的容器,同理还是需要一个统一的网桥进行交互

![大型网桥](https://static001.geekbang.org/resource/image/b4/3d/b4387a992352109398a66d1dbe6e413d.png)

如果Continer1需要访问Continer3就需要把请求转发到自己的docker0上,在转交给宿主机的eth0,再由宿主机的eth0将请求转发到Continer3所在的宿主机的网卡上,之后继续想内部的docker0进行路由完成转发.


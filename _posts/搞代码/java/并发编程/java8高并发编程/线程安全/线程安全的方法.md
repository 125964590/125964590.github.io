# 线程安全性
- 定义:当多个线程访问某个类时,不管运行环境采用何种调度方式或者这些进程如何交替执行,并且在主调代码中不需要任何额外的同步协调,这个类都表现出正确的行为,那么就成这个类是线程安全的
- 原子性:提供了互斥访问,同一个时刻只能有一个线程来对他进行操作
- 可见性:一个线程对主内存的修改可以及时的被其他线程观察到
- 有序性:一个线程观察其他线程中的指令执行顺序,由于指令重排序的存在该观察结果一般无序

### 原子性-Atomic包
![](https://ws3.sinaimg.cn/large/006tNc79ly1fyydqb07qaj31en0u0qkn.jpg)

### 原子性-锁
![](https://ws1.sinaimg.cn/large/006tNc79ly1fyyds88asyj31mu0ma10x.jpg)
![](https://ws4.sinaimg.cn/large/006tNc79ly1fyye4vkgoej30x00l4wo5.jpg)
![](https://ws4.sinaimg.cn/large/006tNc79ly1fyye9nb3fpj30nk099go0.jpg)

### 线程安全--可见性

![](https://ws2.sinaimg.cn/large/006tNc79ly1fyyebj3p6fj30oi0e4did.jpg)

![](https://ws2.sinaimg.cn/large/006tNc79ly1fyyec4fqahj30nk0dywiw.jpg)

![](https://ws2.sinaimg.cn/large/006tNc79ly1fyyedvrixwj30oc0e10xl.jpg)

### 线程安全--有序性
如果一段程序无法根据happens-befor原则,则代表jvm将对这段代码随意排序
![](https://ws4.sinaimg.cn/large/006tNc79ly1fyyel0k1vpj30nh0bj41p.jpg)
![](https://ws3.sinaimg.cn/large/006tNc79ly1fyyemtaxgrj30q70brwhx.jpg)
![](https://ws2.sinaimg.cn/large/006tNc79ly1fyyenqzf2pj30qz0d10wn.jpg)
![](https://ws2.sinaimg.cn/large/006tNc79ly1fyyeoopbhuj30oc0c1gpi.jpg)
![](https://ws4.sinaimg.cn/large/006tNc79ly1fyyep4i439j30pd0dn0xp.jpg)

### 线程安全--总结
![](https://ws1.sinaimg.cn/large/006tNc79ly1fyyeqks4y4j30sa0dvaci.jpg)